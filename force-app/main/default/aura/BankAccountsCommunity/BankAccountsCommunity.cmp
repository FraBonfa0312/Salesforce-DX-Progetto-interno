<!--
 - Created by cxu on 24/10/2016.
 -->

<aura:component description="BankAccountsCommunity"
                implements="forceCommunity:availableForAllPageTypes" access="global" controller="FinServCommunity">

    <aura:attribute name="bankAccounts" type="object[]"></aura:attribute>
    <aura:attribute name="displayAs" type="String" default="Cards" access="public" />
    <aura:attribute name="finAccRecType" type="String" default="Bank Account" access="public" />
    
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
<!--
    <lightning:card title="" footer="View All">
-->
    <aura:if isTrue="{!v.displayAs == 'Table'}" > 
        <article class="slds-card">
            
            <div class="slds-card__header slds-grid">
                <h2>
                    <a href="javascript:void(0);" class="slds-text-link--reset">
                        <span class="slds-text-heading--small">{!v.finAccRecType}s</span>
                    </a>
                </h2>
            </div>
            <table class="slds-table slds-table--bordered slds-table--cell-buffer">
                <thead>
                <tr class="slds-text-title--caps">
                    <th scope="col">
                        <div class="slds-truncate" title="Financial Account Name">Financial Account Name</div>
                    </th>
                    <th scope="col">
                        <div class="slds-truncate" title="Type">Type</div>
                    </th>
                    <th scope="col">
                        <div class="slds-truncate" title="Owner Type">Owner Type</div>
                    </th>
                    <th scope="col">
                        <div class="slds-truncate" title="Held Away">Held Away</div>
                    </th>
                    <th scope="col">
                        <div class="slds-truncate" title="Balance">Balance</div>
                    </th>
                </tr>
                </thead>
    
                <tbody>
                <aura:iteration items="{!v.bankAccounts}" var="account">
                    <tr>
                        <th scope="row" data-label="Financial Account Name">
                            <div class="slds-truncate" title="Financial Account Name"><a href="javascript:void(0);" onclick="{!c.navigateToObject}" id="{!account.Id}">
                                    {!account.Name}
                            </a></div>
                        </th>
                        <td data-label="Type">
                            <div class="slds-truncate" title="Type">{!account.FinServ__FinancialAccountType__c}</div>
                        </td>
                        <td data-label="Owner Type">
                            <div class="slds-truncate" title="Owner Type">{!account.FinServ__Ownership__c}</div>
                        </td>
                        <td data-label="Held Away">
                            <div class="slds-truncate" title="Held Away"><ui:outputDate value="{!account.FinServ__OpenDate__c}"/></div>
                        </td>
                        <td data-label="Balance">
                            <div class="slds-truncate" title="Balance"><ui:outputCurrency value="{!account.FinServ__Balance__c}"/></div>
                        </td>
                    </tr>
                </aura:iteration>
                </tbody>
            </table>
        </article> 
    </aura:if>
    <!--
    </lightning:card>
-->
    
    <aura:if isTrue="{!v.displayAs == 'Cards'}" > 
        <div>
            <div class="slds-text-heading--small acc-heading"> {!v.finAccRecType}s </div>
            <aura:if isTrue="{! empty(v.bankAccounts)}">
            	<article class="slds-card">
                    <lightning:layout horizontalAlign="spread">
                        <lightning:layoutItem padding="around-small" size="6">
                            <div class="slds-text-title_caps acc-num">
                                <a href="javascript:void(0);" id=""> No Accounts </a>
                            </div>
                            <div class="slds-text-title_caps acc-num"></div>
                        </lightning:layoutItem>
                        <lightning:layoutItem padding="around-small" size="6">
                            <div class="slds-text-align_right slds-text-heading_medium acc-amount"><ui:outputCurrency value="0"/></div>
                            <div class="slds-text-align_right slds-text-color_weak available-balance">Available Balance</div>
                        </lightning:layoutItem>
                    </lightning:layout>
                </article>
            </aura:if>

            <aura:iteration items="{!v.bankAccounts}" var="account">
                <article class="slds-card">
                    <lightning:layout horizontalAlign="spread">
                        <lightning:layoutItem padding="around-small" size="6">
                            <div class="slds-text-title_caps acc-name">
                                <a href="javascript:void(0);" onclick="{!c.navigateToObject}" id="{!account.Id}"> {!account.Name} </a>
                            </div>
                            <div class="slds-text-title_caps acc-num">{!account.FinServ__FinancialAccountNumber__c}</div>
                        </lightning:layoutItem>
                        <lightning:layoutItem padding="around-small" size="6">
                            <div class="slds-text-align_right slds-text-heading_medium acc-amount"><ui:outputCurrency value="{!account.FinServ__Balance__c}"/></div>
                            <div class="slds-text-align_right slds-text-color_weak available-balance">Available Balance</div>
                        </lightning:layoutItem>
                    </lightning:layout>
                </article>
            </aura:iteration>
        </div>
    </aura:if>
    
    
</aura:component>