<template>
    <div class="slds-p-horizontal_small container">
        <!-- Today's Date -->
        <!-- <div class="slds-text-heading_large">
                    <lightning-formatted-date-time value={date_today}></lightning-formatted-date-time>
                </div> -->

        <!-- Summary/Completion Metrics Section -->
        <div class="slds-p-vertical_medium">
            <lightning-layout>
                <lightning-layout-item flexibility="grow">
                    <div class="slds-media slds-p-right_small slds-media_center slds-border_right">
                        <div class="slds-media__figure">
                            <div class="slds-text-heading_medium">{visitsData.completedVisits}</div>
                            <div style="color: rgb(112, 110, 107); font-size: 0.8125rem;">Completed
                                Visits</div>
                        </div>
                        <div class="slds-media__body">
                            <lightning-progress-bar variant="circular" value={visitsCompletedValue} size="large"
                                class="progress-bar-green"></lightning-progress-bar>
                        </div>
                        <div class="slds-media__figure slds-media__figure_reverse"></div>
                    </div>
                </lightning-layout-item>

                <lightning-layout-item flexibility="grow">
                    <div class="slds-media slds-p-right_xx-small slds-p-left_small slds-media_center">
                        <div class="slds-media__figure">
                            <div class="slds-text-heading_medium">{visitsData.remaningVisits}</div>
                            <div style="color: rgb(112, 110, 107); font-size: 0.8125rem;">Upcoming
                                Visits</div>
                        </div>
                        <div class="slds-media__body">
                            <lightning-progress-bar variant="circular" value={visitsRemainingValue} size="large"
                                class="progress-bar-green"></lightning-progress-bar>
                        </div>
                        <div class="slds-media__figure slds-media__figure_reverse"></div>
                    </div>
                </lightning-layout-item>
            </lightning-layout>
        </div>

        <div class="slds-section slds-is-open today">
            <h3 class="slds-section__title">
                <button class="slds-button slds-section__title-action" data-section="today" onclick={toggleSection}>
                    <lightning-icon icon-name="utility:switch" alternative-text="Approved" size="x-small"
                        class="slds-m-right_x-small"></lightning-icon>
                    <span class="slds-truncate" title="Today">Today</span>
                </button>
            </h3>
            <div class="slds-section__content">
                <div class="slds-wrap slds-grid ">
                    <template if:true={showVisitsToday} for:each={visitsToday} for:item="visit">
                        <div key={visit.Id} class="slds-size_1-of-3 slds-p-around_small">
                            <c-ins_-tile-anything-cmp record={visit}></c-ins_-tile-anything-cmp>
                        </div>
                    </template>
                    <template if:false={showVisitsToday}>
                        <div class="slds-size_1-of-1 slds-text-align_center">
                            <p>You have no visits for today!</p>
                        </div>
                    </template>
                </div>
                <!-- <div class="alert">
                            <div class="slds-m-top_medium slds-p-around_small slds-p-right_xx-large slds-card slds-card_boundary"
                                style="background-color: rgb(253, 250, 218);">
                                <div class="slds-media slds-p-left_medium">
                                    <div class="slds-media__figure">
                                        <img src="https://sfdc-demo-images-jake.s3.amazonaws.com/sfmaps-logo.png"
                                            class="embedImg" />

                                    </div>
                                    <div class="slds-media__body">
                                        <div style="font-size: 0.8125rem;">
                                            <b>Traffic Alert!</b>
                                        </div>
                                        <div style="font-size: 0.8125rem;">Heavy congestion reported on
                                            I-94 West.
                                            Consider <a onclick={doMapAlert}>optimizing</a> your
                                            morning route.</div>
                                    </div>
                                </div>
                            </div>
                        </div> -->
            </div>
        </div>

        <div class="slds-section tomorrow">
            <h3 class="slds-section__title">
                <button class="slds-button slds-section__title-action" data-section="tomorrow" onclick={toggleSection}>
                    <lightning-icon icon-name="utility:switch" alternative-text="Approved" size="x-small"
                        class="slds-m-right_x-small"></lightning-icon>
                    <!-- <svg class="slds-section__title-action-icon slds-button__icon slds-button__icon_left"
                                    aria-hidden="true">
                                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#switch"></use>
                                </svg> -->
                    <span class="slds-truncate" title="Tomorrow">Tomorrow</span>
                </button>
            </h3>
            <div class="slds-section__content">
                <div class="slds-wrap slds-grid ">
                    <template if:true={showVisitsTomorrow} for:each={visitsTommorrow} for:item="visit">
                        <div key={visit.Id} class="slds-size_1-of-3 slds-p-around_small">
                            <c-ins_-tile-anything-cmp record={visit}></c-ins_-tile-anything-cmp>
                        </div>
                    </template>
                    <template if:false={showVisitsTomorrow}>
                        <div class="slds-size_1-of-1 slds-text-align_center">
                            <p>You have no visits for tomorrow!</p>
                        </div>
                    </template>
                </div>
            </div>
        </div>
    </div>
</template>